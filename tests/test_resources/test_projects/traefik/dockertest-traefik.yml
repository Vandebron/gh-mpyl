traefik:
  ingressRoutes:
    all:
      entryPoints:
        - web
      routes:
        - kind: Rule
          match: placeholder-test-{namespace}-{PR-NUMBER}-test
          middlewares:
            - name: "strip-prefix-{SERVICE-NAME}"
  middlewares:
    all:
      - metadata:
          name: "strip-prefix"
        spec:
          stripPrefix:
            prefixes:
              - "/service"
      - metadata:
          name: "strip-prefix-{SERVICE-NAME}"
        spec:
          stripPrefix:
            prefixes:
              - "/service2/test/{namespace}/{PR-NUMBER}"
  hosts:
    - host:
        pr: "Host(`payments-{PR-NUMBER}.test.nl`)"
        test: "Host(`payments.test.nl`)"
        acceptance: "Host(`payments.acceptance1.nl`)"
        production: "Host(`payments.nl`)"
      tls:
        all: "le-custom-prod-wildcard-cert"
      insecure: true
      additionalRoute: "ingress-intracloud-https"
      syntax:
        all: v2
    - host:
        all: "Host(`some.other.host.com`)"
      servicePort: 4091
      priority:
        all: 1000
      tls:
        all: "le-other-prod-wildcard-cert"
      syntax:
        all: v3